{% set news_posts = fn('get_news_posts', 4) %}

<section class="flex flex-col gap-8 justify-center overflow-hidden bg-white relative z-40 text-navy">
	<div class="container flex flex-col relative z-40 gap-20">
		<div class="flex flex-row justify-between items-end">
			<div class="block-content relative w-fit">
				<div class="supertitle text-paragraphDark flex flex-row items-center gap-2">
					<div class="size-2.5 bg-paragraphDark blink"></div>Whats been happening
				</div>
				{{ post.news.title }}
			</div>

			<div class="block-content max-w-[500px] text-paragraphDark text-pretty">
				{{ post.news.content }}
			</div>
		</div>
		<div class="flex flex-col gap-8">
			<div id="news-swiper-container" class="swiper w-full !overflow-visible">
				{% include 'icons/mask.twig' with {
					class: 'sr-only',
					id: 'news-mask'
				} %}
				<div class="swiper-wrapper">
					{% for news in news_posts %}
						<div class="swiper-slide">
							<a href="{{ news.link }}"
								class="post-tease flex flex-col w-full gap-8 p-8 rounded-3xl overflow-hidden aspect-3/4 relative"
								style="clip-path: url('#news-mask');">
								<img src="{{ get_image(news.thumbnail).src }}"
									alt="{{ news.thumbnail.alt }}"
									class="w-full object-cover absolute top-0 left-0 h-full" />
								<div class="absolute bottom-0 left-0 bg-gradient-to-t from-darkBlue to bg-darkBlue/0 w-full h-1/2"></div>

								<div class="relative flex flex-col flex-grow justify-between gap-4 z-20">
									<div class="flex flex-row gap-2 items-center date-content">
										<span class="bg-darkBlue rounded-lg py-1 px-4 text-white">
											{{ news.terms('category')[0].name ? : 'News' }}
										</span>
										<span class="bg-white rounded-lg py-1 px-4 text-">{{ news.date|date('j M') }}</span>
									</div>
									<div class="w-3/4 flex flex-col gap-4">
										<h5 class="is-h4 text-white text-balance">
											{{ news.title }}
										</h5>
										<div class="flex flex-row items-center gap-2 text-paragraphLight">
											Read more{% include 'icons/chevron.twig' with {
												class: 'size-3'
											} %}
										</div>
									</div>
								</div>
							</a>
						</div>
					{% endfor %}
				</div>
			</div>
			<div class="flex flex-row gap-2">
				<div id="news-swiper-prev"
					class="cursor-pointer size-16 flex justify-center items-center bg-darkBlue rounded-lg hover:bg-navy transition active:scale-95">
					{% include 'icons/chevron.twig' with {
						class: 'size-4 text-white rotate-180 -translate-x-0.5'
					} %}
				</div>
				<div id="news-swiper-next"
					class="cursor-pointer size-16 flex justify-center items-center bg-darkBlue rounded-lg hover:bg-navy transition active:scale-95">
					{% include 'icons/chevron.twig' with {
						class: 'size-4 text-white translate-x-0.5'
					} %}
				</div>
			</div>
		</div>
	</div>
</section>
